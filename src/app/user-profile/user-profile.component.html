<div class="user-profile">
  <a class="navbar-brand" routerLink="/app-user-home">
    <img src="../../assets/imager/logo_preview_rev_1.png" alt="">
  </a>
  <!-- Tiêu đề và nút chuyển đổi -->
  <h2 [ngClass]="{'active': isProfileView}" (click)="toggleView('profile')">Thông Tin Người Dùng</h2>
  <h2 [ngClass]="{'active': isChangePasswordView}" (click)="toggleView('changePassword')">Đổi Mật Khẩu</h2>
  <h2 [ngClass]="{'active': isChangeLocationView}" (click)="toggleView('changeLocation')">Địa chỉ</h2>

  <!-- Chi tiết thông tin người dùng -->
  <div *ngIf="isProfileView">
    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
    <div *ngIf="userProfile">
      <form (ngSubmit)="onUpdateProfile()">
        <div>
          <label for="name">Tên:</label>
          <input id="name" [(ngModel)]="userProfile.name" name="name" required />
        </div>
        <div>
          <label for="phoneNumber">Số Điện Thoại:</label>
          <input id="phoneNumber" [(ngModel)]="userProfile.phoneNumber" name="phoneNumber" required />
        </div>
        <div>
          <label for="email">Email:</label>
          <input id="email" [(ngModel)]="userProfile.email" name="email" required />
        </div>
        <div>
          <label for="userName">Tên Đăng Nhập:</label>
          <input id="userName" [(ngModel)]="userProfile.userName" name="userName" required />
        </div>
        <button type="submit">Cập Nhật Hồ Sơ</button>
      </form>
    </div>
    <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>
  </div>

  <!-- Form thay đổi mật khẩu -->
  <div *ngIf="isChangePasswordView">
    <form (ngSubmit)="onChangePassword()">
      <div>
        <label for="oldPassword">Mật khẩu cũ:</label>
        <input id="oldPassword" [(ngModel)]="oldPassword" name="oldPassword" type="password" required />
      </div>
      <div>
        <label for="newPassword">Mật khẩu mới:</label>
        <input id="newPassword" [(ngModel)]="newPassword" name="newPassword" type="password" required />
      </div>
      <div>
        <label for="newPasswordConfirm">Xác nhận mật khẩu mới:</label>
        <input id="newPasswordConfirm" [(ngModel)]="newPasswordConfirm" name="newPasswordConfirm" type="password" required />
      </div>
      <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
      <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>
      <button type="submit">Cập Nhật Mật Khẩu</button>
    </form>
  </div>

  <!-- Chọn địa chỉ -->
  <div *ngIf="isChangeLocationView">
    <div class="container">
      <h1>Chọn danh sách tỉnh</h1>
      <form>
        <select [(ngModel)]="selectedProvince" (change)="onProvinceChange()" name="province">
          <option value="" disabled selected>Chọn tỉnh</option>
          <option *ngFor="let province of provinces" [value]="province.code">{{ province.name }}</option>
        </select>
        <select [(ngModel)]="selectedDistrict" (change)="onDistrictChange()" name="district">
          <option value="" disabled selected>Chọn quận</option>
          <option *ngFor="let district of districts" [value]="district.code">{{ district.name }}</option>
        </select>
        <select [(ngModel)]="selectedWard" (change)="onWardChange()" name="ward">
          <option value="" disabled selected>Chọn phường</option>
          <option *ngFor="let ward of wards" [value]="ward.code">{{ ward.name }}</option>
        </select>
      </form>
      <h2>{{ result }}</h2>
      <br>
      <button type="button" (click)="saveAddressToLocalStorage()">Lưu</button>

    <!-- Success and error messages for saving address -->
    <div *ngIf="saveMessage" class="success-message">
      {{ saveMessage }}
    </div>
    <div *ngIf="saveErrorMessage" class="error-message">
      {{ saveErrorMessage }}
    </div>
    </div>
  </div>
</div>
